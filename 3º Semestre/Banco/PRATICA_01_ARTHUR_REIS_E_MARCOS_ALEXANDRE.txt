CREATE TABLE FUN_FUNCIONARIO (
    COD_FUNC NUMBER(4) PRIMARY KEY,
    NOME VARCHAR2(100) NOT NULL,
    CPF VARCHAR2(15),
    SALARIO NUMBER(4, 2),
    ENDERECO VARCHAR2(252),
    SEXO CHAR(1),
    CONSTRAINT CK_SEXO CHECK(SEXO IN ('F', 'M')),
    CONSTRAINT CK_SALARIO CHECK(SALARIO >= 1000),
    CONSTRAINT UK_CPF UNIQUE(CPF)
);

CREATE TABLE DEP_DEPARTAMENTO (
    COD_DEPART NUMBER(4) PRIMARY KEY,
    NOME VARCHAR2(30) NOT NULL,
    DATA_INICIAL DATE
);

CREATE TABLE PRO_PROJETO (
    COD_PROJ NUMBER(4) PRIMARY KEY,
    COD_DEPART NUMBER(4),
    TITULO VARCHAR2(150) NOT NULL,
    DESCRICAO VARCHAR2(252),
    DATA_CAD DATE DEFAULT SYSDATE,
    CONSTRAINT FK_COD_DEPART FOREIGN KEY(COD_DEPART) REFERENCES DEP_DEPARTAMENTO(COD_DEPART)
);

CREATE TABLE DEP_DEPENDENTE (
    COD_FUNC NUMBER(4),
    SEQ NUMBER(4),
    NOME VARCHAR2(100) NOT NULL,
    PARENTESCO VARCHAR2(30) NOT NULL,
    DATA_NASC DATE,
    CONSTRAINT FK_COD_FUNC FOREIGN KEY(COD_FUNC) REFERENCES FUN_FUNCIONARIO(COD_FUNC),
    CONSTRAINT PK_DEPENDENTE PRIMARY KEY (COD_FUNC, SEQ),
    CONSTRAINT CK_PARESNTESCO CHECK (PARENTESCO IN ('MAE','PAI','IRMAOS','FILHO'))
);

CREATE TABLE PAR_PARTICIPA (
    COD_FUNC NUMBER(4),
    COD_PROJ NUMBER(4),
    HORAS VARCHAR2(50),
    CONSTRAINT FK_COD_FUNC1 FOREIGN KEY(COD_FUNC) REFERENCES FUN_FUNCIONARIO(COD_FUNC),
    CONSTRAINT FK_COD_PROJ FOREIGN KEY(COD_PROJ) REFERENCES PRO_PROJETO(COD_PROJ),
    CONSTRAINT PK_PAR_PARTICIPA PRIMARY KEY(COD_PROJ, COD_FUNC)
    );

CREATE TABLE LOC_LOCALIZACAO (
    COD_DEPART NUMBER(4),
    LOCALIDADE VARCHAR2(252),
    CONSTRAINT FK_COD_DEPART1 FOREIGN KEY(COD_DEPART) REFERENCES DEP_DEPARTAMENTO(COD_DEPART),
    CONSTRAINT PK_LOC_LOCALIZACAO PRIMARY KEY (COD_DEPART, LOCALIDADE)
    );

ALTER TABLE FUN_FUNCIONARIO ADD (
    COD_SUPER NUMBER(4),
    CONSTRAINT FK_COD FOREIGN KEY (COD_SUPER) REFERENCES FUN_FUNCIONARIO(COD_FUNC) 
);


ALTER TABLE FUN_FUNCIONARIO ADD (
    COD_DEPART NUMBER(4),
    CONSTRAINT FK_COD_DEPART_FUN FOREIGN KEY (COD_DEPART) REFERENCES DEP_DEPARTAMENTO(COD_DEPART)   
);